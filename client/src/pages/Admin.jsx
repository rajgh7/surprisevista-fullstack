import React, {useEffect,useState} from 'react'
import axios from 'axios'
export default function Admin(){ const [contacts,setContacts]=useState([])
const [orders,setOrders]=useState([])
useEffect(()=>{ axios.get('http://localhost:5000/api/contact').then(r=>setContacts(r.data)).catch(()=>{}) ; axios.get('http://localhost:5000/api/orders').then(r=>setOrders(r.data)).catch(()=>{}) },[])
return (<section className='max-w-6xl mx-auto px-6 py-8'><h2 className='text-2xl text-sv-purple font-heading mb-4'>Admin Dashboard</h2><div className='grid md:grid-cols-2 gap-6'><div className='bg-white p-4 rounded shadow'><h3 className='font-semibold mb-2'>Contacts</h3><div className='space-y-2 max-h-80 overflow-auto'>{contacts.map(c=>(<div key={c._id} className='border-b py-2'><div className='font-semibold'>{c.name} <span className='text-xs text-gray-500'>({new Date(c.date).toLocaleString()})</span></div><div className='text-sm'>{c.email} {c.phone}</div><div className='text-sm'>{c.message}</div></div>))}</div></div><div className='bg-white p-4 rounded shadow'><h3 className='font-semibold mb-2'>Orders</h3><div className='space-y-2 max-h-80 overflow-auto'>{orders.map(o=>(<div key={o._id} className='border-b py-2'><div className='font-semibold'>Order #{o._id} <span className='text-xs text-gray-500'>({new Date(o.date).toLocaleString()})</span></div><div className='text-sm'>{o.name} • {o.email} • {o.phone}</div><div className='text-sm'>Total: ₹{o.totalAmount}</div></div>))}</div></div></div></section>) }
